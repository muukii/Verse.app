name: Deploy to TestFlight

on:
  push:
    branches:
      - main
  workflow_dispatch:

# Available secrets in this repository:
#   Team API Key (currently used):
#     - ASC_TEAM_KEY_ID: API Key ID
#     - ASC_TEAM_KEY_CONTENT: API Key .p8 file content
#     - ASC_TEAM_ISSUER_ID: Issuer ID
#
#   Individual API Key (alternative):
#     - ASC_INDIVIDUAL_KEY_ID: API Key ID
#     - ASC_INDIVIDUAL_KEY_CONTENT: API Key .p8 file content
#     - ASC_INDIVIDUAL_ISSUER_ID: Issuer ID
#
#   Common:
#     - TEAM_ID: Apple Developer Team ID

jobs:
  deploy:
    uses: ./.github/workflows/reusable-ios-appstoreconnect.yml
    with:
      scheme: YouTubeSubtitle
      xcode-version: '26.2'
      macos-runner: macos-26
    secrets:
      ASC_KEY_ID: ${{ secrets.ASC_TEAM_KEY_ID }}
      ASC_KEY_CONTENT: ${{ secrets.ASC_TEAM_KEY_CONTENT }}
      ASC_ISSUER_ID: ${{ secrets.ASC_TEAM_ISSUER_ID }}
      TEAM_ID: ${{ secrets.TEAM_ID }}
